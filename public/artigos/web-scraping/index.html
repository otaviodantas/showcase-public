<!DOCTYPE html>
<html lang="pt">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="Otávio Mendonça ">
<meta name="description"
    content="Web Scraping na página da OLX" />
<meta name="keywords"
    content=", Python, BeautifulSoup" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://otaviodantas.com/artigos/web-scraping/" />


<title>
    
    Web Scraping na página da OLX | Otávio Mendonça
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://otaviodantas.com/main.c56d17f0a8151dc3fb01bf191ffb8edb734f3eb84f8c69d198a1a3a585ad89f9.css">




<link rel="apple-touch-icon" sizes="180x180" href="https://otaviodantas.com/%20apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://otaviodantas.com/%20favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://otaviodantas.com/%20favicon-16x16.png">
<link rel="manifest" href="https://otaviodantas.com/%20site.webmanifest">
<link rel="mask-icon" href="https://otaviodantas.com/%20safari-pinned-tab.svg" color="#1b1c1d">
<link rel="shortcut icon" href="https://otaviodantas.com/%20favicon.ico">
<meta name="msapplication-TileColor" content="#1b1c1d">
<meta name="theme-color" content="#1b1c1d">


<meta itemprop="name" content="Web Scraping na página da OLX">
<meta itemprop="description" content="Web Scraping na página da OLX">
<meta itemprop="datePublished" content="2020-07-06T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-07-06T00:00:00+00:00" />
<meta itemprop="wordCount" content="453">
<meta itemprop="image" content="https://otaviodantas.com/"/>



<meta itemprop="keywords" content="Python,BeautifulSoup," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://otaviodantas.com/"/>

<meta name="twitter:title" content="Web Scraping na página da OLX"/>
<meta name="twitter:description" content="Web Scraping na página da OLX"/>






<meta property="article:section" content="Development" />



<meta property="article:published_time" content="2020-07-06 00:00:00 &#43;0000 UTC" />










<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-20V0R8NYR0', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://otaviodantas.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">~</span>
            <span class="logo__text">cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#FFD539;
                   animation-duration:1s;">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://otaviodantas.com/artigos/">Artigos</a></li><li><a href="https://otaviodantas.com/sobre/">Sobre</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://otaviodantas.com/artigos/web-scraping/">Web Scraping na página da OLX</a></h2>

            
            
            

            <div class="post-content">
                <p><img src="https://miro.medium.com/max/1094/1*75AH4zD0r5CNtO_Zpf_epg.jpeg" alt="https://miro.medium.com/max/1094/1*75AH4zD0r5CNtO_Zpf_epg.jpeg"></p>
<h2 id="mas-oque-é-isso"><strong>Mas oque é isso?</strong></h2>
<p>O método de web scraping consiste em obter dados de uma página web, navegando pelo seu código HTML e capturando os dados que interessam, para posteriormente usa-los em outras aplicações.</p>
<p>Um exemplo da utilização dessa ferramenta pode ser vista quando vamos até um site de vendas de algum produto, e queremos prever o preço desse produto daqui a alguns dias ou meses. Para isso, aplicamos o web scraping para obter os dados dos preços que estão sendo mostrados no site.</p>
<p>No meu caso, vou utilizar o site da OLX para aplicar a técnica.</p>
<h2 id="por-onde-começar"><strong>Por onde começar?</strong></h2>
<p>Antes de tudo precisamos ir até a página e visualizar quais dados nos interessa.</p>
<ul>
<li>Preço do produto</li>
<li>Descrição</li>
<li>Localização</li>
<li>Nº de páginas</li>
</ul>
<blockquote>
<p>Para que os dados continuassem os iguais, mesmo que eu atualize a página, tive que ordena-los por cidade, e menor preço, dessa forma obteria os mesmos números sempre que acesse aquela URL.</p>
</blockquote>
<p><img src="https://miro.medium.com/max/1094/1*9aRv_5wekpetKWdver2qRQ.png?q=20" alt="https://miro.medium.com/max/47/1*9aRv_5wekpetKWdver2qRQ.png?q=20"></p>
<h2 id="identificação-no-html"><strong>Identificação no HTML</strong></h2>
<p>Como já localizamos os dados visualmente, agora basta ir no código fonte HTML e identificar onde eles estão.</p>
<p>A esquerda, o card onde está localizado a maioria das informações. A direita é o primeiro item da lista, ou seja, o primeiro produto.</p>
<p><img src="https://miro.medium.com/max/1059/1*YMCMHTHQAIY805JjA8-peQ.png" alt="https://miro.medium.com/max/1059/1*YMCMHTHQAIY805JjA8-peQ.png"></p>
<p><img src="https://miro.medium.com/max/1055/1*ErrbMWwGlO31pv5ag6XbKg.png" alt="https://miro.medium.com/max/1055/1*ErrbMWwGlO31pv5ag6XbKg.png"></p>
<p>Quando fazemos o scraping em um site comercial, os itens que são apresentados estão dentro de uma lista de itens, que por sua vez possuem a mesma estrutura dos demais. Tendo isso em mente, o ideal é identificar as informações no primeiro item e em seguida replicar para o restante.</p>
<p>Para que o nosso código entenda onde estão localizados as informações, precisamos passar os identificadores do código HTML, ou seja, suas classes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.env" data-lang=".env">CONTAINER_PAGES_FIRST <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;col2 sc-15vff5z-5 fFdJjk&#39;</span>
CONTAINER_PAGES_SEC <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;sc-jTzLTM sc-ksYbfQ uUqze&#39;</span>
CONTAINER_PAGES_THIRD <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;sc-1mi5vq6-0 gfpAwo&#39;</span>

CONTAINER_MAIN_CARDS_FIRST <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;sc-1fcmfeb-0 WQhDk&#39;</span>
CONTAINER_MAIN_CARDS_SEC   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;fnmrjs-1 ddDPXY&#39;</span>
</code></pre></div><h2 id="módulos"><strong>Módulos</strong></h2>
<p>Os módulos são estruturados da seguinte forma:</p>
<blockquote>
<p>simple_scraping.py</p>
</blockquote>
<p>Ele pode ser executado como uma forma muito mais simples de web scraping, ele não te retorna dados, porém são poucas linhas de comando que podem ser utilizadas para entender melhor o funcionamento das bibliotecas.</p>
<blockquote>
<p>err_handling.py</p>
</blockquote>
<p>Módulo principal, quando executado interage com os demais módulos e retorna um tabela com todos os dados obtidos</p>
<blockquote>
<p>all_def.py</p>
</blockquote>
<p>Módulo separado com as funções que foram utilizadas, separadas por suas funcionalidades, por exemplo, buscar o texto, a imagem, gerar a tabela etc.</p>
<blockquote>
<p>my_options.py</p>
</blockquote>
<p>Neste módulo eu incorporei todas as informações estáticas em forma de varáveis, para que eu pudesse apenas importar e usa-las de forma comum.</p>
<h2 id="dificuldades"><strong>Dificuldades</strong></h2>
<p>Apesar de obter bastante dados, não consegui coletar por completo as informações, se prestarem atenção, o número de produtos ultrapassa os 150 mil. Quando tentei implementar a lógica para capturar todos os produtos foi me retornado um erro pelo tamanho de páginas que eu precisaria acessar.</p>
<h2 id="link"><strong>Link</strong></h2>
<p><a href="https://github.com/otaviodantas/web-scraping-python">github.com</a></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://otaviodantas.com/tags/python/">Python</a></span>
        <span class="tag"><a href="https://otaviodantas.com/tags/beautifulsoup/">BeautifulSoup</a></span>
        
    </p>

            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://otaviodantas.com/categories/development/">Development</a></span>
        
    </p>

  		
    </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            
            
            <span></span>
            
            
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span><span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://otaviodantas.com/bundle.min.ace63d93098bf623f7c286a9084a4c22bfc482944c734f87fe0b685c7c6c7fa0ad2edb028c3b4b60d3343720c8ab490b320ad7f8edf4f6e9a6b898fc529057a9.js" integrity="sha512-rOY9kwmL9iP3woapCEpMIr/EgpRMc0&#43;H/gtoXHxsf6CtLtsCjDtLYNM0NyDIq0kLMgrX&#43;O309ummuJj8UpBXqQ=="></script>



    </body>
</html>
